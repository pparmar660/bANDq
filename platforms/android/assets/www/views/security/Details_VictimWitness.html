<div class="layout" id="Details_VictimWitness" ng-controller="Details_VictimWitnessCtrl">
    <div class="global_Load_head">
        <div class="text_wrap">
            <div class="icon">
                <div class="center-icon on-icons">
                    <div class="circle-icon">
                        <div class="v-m">
                            <span class="d-icon d-icon4"></span>
                        </div>
                    </div>  
                </div>
            </div>
            <div class="text_head">
                <h1><span>{{title}}:</span> {{witnessData.fullname}}</h1>
            </div>							
        </div>
        <div class="edit_btn_wrap" ng-hide="modulePermission.victimWitness == 'Read Only'">
            <div class="btn-group sl-icons icon-btn">
                <div class="wrap-btn">							
                    <button class="button btn-orange btn-block radius" type="button" ng-click="editBtnClicked()">	
                        <span class="v-flex">								  
                            <span class="btn-txt">Edit</span>
                            <span class="circle-flex">
                                <span class="s-btn-icon"><i class="fa fa-edit"></i></span>			
                            </span>
                        </span>
                    </button>
                </div>								  
            </div>
        </div>
        <p>Last updated: {{witnessData.last_updated}}</p>							
    </div>
    <div ng-show="successShow == true" class="alertvalidate close-parent success">
        <span class="success-icon"></span>
        <h4>{{successMessage}}</h4>
        <div class="close" ng-click="successClose()"><span class="fa fa-times"></span></div>
    </div>
    <div class="incident_report_tab of_detail_view">
        <div class="offender_slider_wrap">
            <div ng-if="images.length > 0" class="carousel-demo-fullscreen">
                <ul rn-carousel rn-carousel-controls rn-carousel-buffered class="carousel1" rn-carousel-index="imageIndex">
                    <li id="tags-list" ng-repeat="image in images track by $index" ng-class="'id-' + {{$index}}">
                        <img ng-src="{{image.imageurl}}" custom-click="imageLargeView(image)"/> 
                    </li>

                </ul>
            </div>
            <div ng-if="images.length == 0" class="carousel-demo-fullscreen">
                <img src="images/profile_img_1.jpg"/> 
            </div>
        </div>
        <div class="offender_details">
            <div class="">
                <ul id="tabs-list3" class="tabs-list">
                    <li class="active">Contact Details</li>
                    <li>Images &amp; Media</li>

                </ul>

                <div id="tabs_contents3" class="tabs_contents">		
                    <h2>Contact Details <i class="fa fa-sort-desc" aria-hidden="true"></i></h2>
                    <div class="tabing-content">
                        <div class="vvl_wrap">
                            <div class="left">
                                <ul>

                                    <li><p><span>Categories:</span><strong ng-bind-html="witnessData.catagoriedTitle"></strong></p></li>
                                    <li><p><span>Telephone:</span> <strong ng-bind-html="witnessData.telephone_usr"></strong></p></li>
                                    <li><p><span>Mobile:</span> <strong ng-bind-html="witnessData.mobile_usr"></strong></p></li>
                                    <li><p><span>Email:</span> <strong ng-bind-html="witnessData.email_usr"></strong></p></li>
                                    <li><p><span>Gender:</span> <strong ng-bind-html="witnessData.gender_name"></strong></p></li>

                                    <!--                                    <li><p>Describe what happen...</p></li>-->
                                    <!--                                    <li><h5>Joe was assaulted dusring a theft</h5></li>-->
                                </ul>
                            </div>
                            <div class="left">
                                <ul>
                                    <li><p><span>Address 1:</span> <strong ng-bind-html="witnessData.address_usr"></strong></p></li>
                                    <li><p><span>Address 2:</span> <strong ng-bind-html="witnessData.address_2_usr"></strong></p></li>
                                    <li><p><span>Address 3:</span> <strong ng-bind-html="witnessData.address_3_usr"></strong></p></li>
                                    <li><p><span>Postcode:</span> <strong ng-bind-html="witnessData.postcode_usr"></strong></p></li>
                                    <li ng-hide="true"><p><span>Town:</span> <strong ng-bind-html="witnessData.town_usr"></strong></p></li>
                                    <li ng-hide="true"><p><span>County:</span> <strong ng-bind-html="witnessData.county_usr"></strong></p></li>
                                    <li><p><span>Country:</span> <strong ng-bind-html="witnessData.country_name"></strong></p></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <h2>Images &amp; Media <i class="fa fa-sort-desc" aria-hidden="true"></i></h2>
                    <div class="tabing-content">
                        <div class="up_img_wrap">
                            <div class="col_4" ng-repeat="image in images track by $index">
                                <div class="files_upload_wrap">
                                    <div class="image">
                                        <a href="javascript:void(0);"></a>
                                        <img ng-src="{{image.imageurl}}" alt="docs">
                                    </div>
                                    <!--                                <p>{{img.name}}</p>-->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="incident_details">
        <div class="incident_victims_details incident-victim-tabs">
            <div class="">
                <ul id="tabs-list1" class="tabs-list">
                    <li class="active">Incident</li>
                    <li>Vehicles</li>
                    <li>Locations</li>
                    <li>Linked Offenders</li>
                </ul>

                <div id="tabs_contents1" class="tabs_contents">		
                    <h2>Incident <i class="fa fa-sort-desc" aria-hidden="true"></i></h2>
                    <div class="tabing-content">
                        <div ng-if="(incidents.length <= 0 || !incidents)"> No linked Incidents </div>
                        <div class="vertical-scroll">
                            <div class="o_d_t_wrap">
                                <div class="left" ng-repeat="incident in incidents">
                                    <ul>
                                        <li><p><span>Reference:</span> <strong>{{incident.reference_no}}</strong></p></li>
                                        <li><p><span>Category:</span> <strong>{{incident.category}}</strong></p></li>
                                        <li><p><span>Outcome/Type:</span> <strong>{{incident.outcome}}/{{incident.type}}</strong></p></li>
                                        <li><p><span>Date:</span> <strong>{{incident.date}}</strong></p></li>
                                        <li><p><span>Status:</span> <strong>{{incident.status}}</strong></p></li>	
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                    <h2>Vehicles <i class="fa fa-sort-desc" aria-hidden="true"></i></h2>
                    <div class="tabing-content">
                        No linked Vehicles
                    </div>

                    <h2>Locations <i class="fa fa-sort-desc" aria-hidden="true"></i></h2>
                    <div class="tabing-content">
                        No linked Locations

                    </div>
                    <h2>Linked Offenders <i class="fa fa-sort-desc" aria-hidden="true"></i></h2>
                    <div class="tabing-content">
                        No linked Offenders
                    </div>
                </div>


            </div>
        </div>

        <div class="incident_notes_wrap" ng-show="isCommAllowed">
            <div class="">
                <ul id="tabs-list2" class="tabs-list">
                    <li class="active">Notes &amp; Comms</li>
                    <li>Tasks &amp; Checklists</li>

                </ul>
                <span ng-show="isCommAllowed" class="comms" ng-click="showAddNotePopup();"></span>

                <div id="tabs_contents2" class="tabs_contents">		
                    <h2>Incident <i class="fa fa-sort-desc" aria-hidden="true"></i></h2>
                    <div class="tabing-content">
                        <div class="comms_notes_wrap">
                            <div ng-repeat="comm in commsNote">
                                <div class="notes_wrap" ng-class-even="'next_line'">
                                    <div class="notes_wrap_img">
                                        <img ng-src="{{staffImage}}" alt="news" /> <!--images/news_1.png-->
                                    </div>
                                    <div class="notes_wrap_content">
                                        <div class="notes_wrap_text">
                                            <h3>{{comm.note_title}}</h3> <!--Derek Gent at Nov 11, 2015 11:09--> 
                                            <p>{{comm.message}}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <h2>Incident <i class="fa fa-sort-desc" aria-hidden="true"></i></h2>
                    <div class="tabing-content">
                        <div class="comms_notes_wrap">
                            <div class="AOC_ContentDiv">
                                <div class="AOC_Content o_d_t_wrap displayBLock">
                                    <ul>
                                        <li ng-repeat="task in taskAndCheckList">
                                            <div class="asignList" >
                                                <label class="msgstatus_icon"><span><img ng-src="{{task.image}}" alt="{{task.image}}"></span></label>
                                                <div class="asignDivContent">
                                                    <p class="text">{{task.task_refernce}}: {{task.content}}</p>
                                                    <p><span>Assigned to: {{task.assigned_to}}</span></p>
                                                    <p><span>Date Required: {{task.date}}</span></p>
                                                </div>
                                            </div> 
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="notePopup" ng-show="isNotePopUp" class="modal-change add-note close-parent">
        <div class="alert_pop_wrap">
            <div class="model_wrapper getHeight">
                <div class="model_area">
                    <div class="popup-heading">									
                        <div class="popup-icon">											
                            <span class="modal-icon note-icon"></span>										
                        </div>
                        <!--                        <p>Add Note <span>(bqir2001: 22/11/2015)</span></p>-->
                        <p>Add Comms <span>{{commsTitle}}</span></p>
                    </div>
                    <form method="post">
                        <div class="model_content_text">
                            <div class="model_forms">
                                <div class="row">
                                    <div class="method" ng-show="isMethod">
                                        <label>Method:</label>

                                        <div class="white_selectbox pop_slect">
                                            <ol class="nya-bs-select" ng-model="selectedMethod" data-live-search="false" ng-change="methodChange(selectedMethod)">
                                                <li nya-bs-option="comm in comms">
                                                    <a>
                                                        <span class="label" >{{ comm.name}}</span>
                                                        <span class="glyphicon glyphicon-ok check-mark"></span>
                                                    </a></li>
                                            </ol>
                                        </div>  
                                    </div>
                                    <div class="method" ng-show="isDuration">
                                        <label>Duration:</label>
                                        <input type="time" name="name" ng-model="notes.time_jnt" placeholder="HH:MM" class="form-control" />
                                    </div>
                                    <div class="method" ng-show="isPhotoLibrary" ng-click="uploadImage();">
                                        <label>Photo/Library:</label>
                                        <input name="file-2[]" id="file-2" class="inputfile inputfile-2" data-multiple-caption="{count} files selected" multiple />
                                        <label for="file-2">
                                            <strong class="camera_icon"><img src="images/icons/camera_icon.png" alt="camera" /></strong> 
                                            <span>Upload</span>
                                        </label>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="method" ng-show="isWith">
                                        <label>With:</label>
                                        <div class="white_selectbox pop_slect">
                                            <ol class="nya-bs-select" ng-model="selectedStaff" data-live-search="false" ng-change="staffChange(selectedStaff)" data-selected-text-format="count" multiple>
                                                <li nya-bs-option="staff in ListStaff">
                                                    <a>
                                                        <span class="label" >{{ staff.firstname_usr}} {{staff.lastname_usr}}</span>
                                                        <span class="fa fa-check check-mark"></span>
                                                    </a></li>
                                            </ol>
                                        </div>
                                    </div>
                                    <div class="method" ng-show = "isRemind">
                                        <label>Remind Me:</label>
                                        <div datepicker datepicker-class="test-custom-class" date-format="dd-MM-yyyy" date-min-limit="01/01/1920" date-max-limit="" date-typer="true">
                                            <input readonly ng-model="notes.remind_me_date" type="text" class="angular-datepicker-input form-control calender_textbox" placeholder="Date" />
                                        </div>
                                        <!--                                        <input type="text" name="name" placeholder="22/01/2016" class="form-control calender_textbox" id="datepicker" />-->
                                    </div>
                                    <div class="method" ng-show="isDeadLine">
                                        <label>Deadline:</label>
                                        <div datepicker datepicker-class="test-custom-class" date-format="dd-MM-yyyy" date-min-limit="01/01/1920" date-max-limit="" date-typer="true">
                                            <input readonly ng-model="notes.dead_line_date" type="text" class="angular-datepicker-input form-control calender_textbox" placeholder="Date" />
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <textarea ng-show="isNoteDesc" ng-model="notes.note_jnt" placeholder="Type Note Here..."></textarea>
                        </div>
                        <div class="model_button">                                    
                            <div class="btn-group action-button icon-btn">  
                                <div class="wrap-btn"> 
                                    <div class="model_button_right fr">
                                        <div class="btn-group action-button action-nxt icon-btn">
                                            <div class="wrap-btn">							
                                                <button class="button btn-green btn-block radius" type="button" ng-click="AddNote()">
                                                    <span class="v-flex">
                                                        <span class="btn-txt">Add Note</span>	
                                                        <span class="circle-flex">
                                                            <span class="s-btn-icon radius"><i class="fa fa-chevron-right"></i></span>	
                                                        </span>											
                                                    </span>
                                                </button>							                  
                                            </div>						
                                        </div>
                                    </div>									

                                    <div class="model_button_left fl">
                                        <div class="btn-group action-button icon-btn close">	
                                            <div class="wrap-btn">							
                                                <button class="button btn-action btn-block radius" type="button" ng-click="hideAddNotePopup()">	
                                                    <span class="v-flex">
                                                        <span class="circle-flex">
                                                            <span class="s-btn-icon radius"><i class="fa fa-chevron-left"></i></span>	
                                                        </span>
                                                        <span class="btn-txt">Cancel</span>
                                                    </span>											
                                                </button>	
                                            </div>							  
                                        </div>
                                    </div>

                                </div>                           
                            </div>
                        </div>
                    </form>
                </div>
            </div>	
        </div>
    </div>

    <div class="alert_pop_wrap animation" ng-show="isSuccess">
        <div class="model_wrapper getHeight">
            <div class="model_area">
                <div class="model_head">
                    <div class="model_head_icon"><img src="images/icons/notification-success-color.png" alt="Success" /></div>
                    <div class="model_head_text green">Success</div>
                </div>
                <div class="model_content_text">
                    <p>{{successMsg}}</p>
                </div>
                <div class="model_button">
                    <div class="model_button_right">
                        <div class="btn-group action-button action-nxt icon-btn">	
                            <div class="wrap-btn">							
                                <button class="button btn-green btn-block radius" ng-click="closeSuccess();" type="button">	
                                    <span class="v-flex">
                                        <span class="btn-txt">OK</span>
                                    </span>											
                                </button>	
                            </div>							  
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="ngdialog ngdialog-theme-default" ng-show="isCameraOption">
        <div class="ngdialog-overlay"></div>
        <div class="ngdialog-content" role="document">
            <div class="ngdialog-message">
                <h3 id="ngdialog1-aria-labelledby">Upload Files</h3>
                <ul class="camera_links">
                    <li><button ng-click="openCamera();"><span class="camera_img"></span> Camera</button></li>
                    <li><button ng-click="openGallery();"><span class="gallery_img"></span> Gallery</button></li>
                    <li><button ng-click="closeCameraOption();"><span class="close_img"></span> Close</button></li>
                </ul>
            </div>
        </div>
    </div>
    <div class="incident_report_btn_wrapper">
        <div class="incident_btn_wrap last_btn" ng-show="isNextRecord">
            <div class="btn-group action-button action-nxt icon-btn">
                <div class="wrap-btn">							
                    <button class="button btn-action btn-block radius" type="button" custom-click="nextPrevDetail(link.next);">
                        <div class="v-flex">
                            <span class="btn-txt">Next</span>	
                            <div class="circle-flex">
                                <span class="s-btn-icon"><i class="fa fa-chevron-right"></i></span>	
                            </div>											
                        </div>
                    </button>							                  
                </div>						
            </div>
        </div>

        <div class="incident_btn_wrap" ng-show="isBackRecord">
            <div class="btn-group action-button icon-btn">	
                <div class="wrap-btn">							
                    <button class="button btn-action btn-block radius" type="button" custom-click="nextPrevDetail(link.previous);">	
                        <div class="v-flex">
                            <div class="circle-flex">
                                <span class="s-btn-icon"><i class="fa fa-chevron-left"></i></span>	
                            </div>
                            <span class="btn-txt">Previous</span>
                        </div>											
                    </button>	
                </div>							  
            </div>
        </div>
    </div>
    <div class="sp_wrap" ng-show="isLargeImageView">

        <div class="slider_wrap">
            <div class="slider_content">

                <div class="slider_img_wrap">
                    <div class="carousel-demo-fullscreen">

                        <ul rn-carousel rn-carousel-controls rn-carousel-buffered class="carousel1" rn-carousel-index="imageIndex">

                            <li id="tags-list" ng-model="imageIndex" ng-repeat="image in images track by $index">


                                <div class="slider_head">
                                    <h2><span class="close_btn" ng-click="closeLargeImageView();"><i class="fa fa-times"></i></span></h2>
                                </div>
                                <h2><strong>Image:</strong> <span>(</span>{{image.imagename}} <span ng-if="image.updateddate != null">- {{image.updateddate}}</span> <span ng-if="image.owner != null">by {{image.owner}}</span><span>)</span></h2>
                                <img ng-src="{{image.imageurl}}" alt="banner{{image.imagename}}"/> 


                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script type="text/javascript">

        $(document).ready(function(){
        activeTab();
                $('#tabs-list1 li').click(function(e){
        e.preventDefault();
                var curInd = $(this).index();
                $(this).siblings().removeClass('active');
                $(this).addClass('active');
                //alert(curInd);
                if ($(window).width() > 767){
        $('#tabs_contents1 .tabing-content').fadeOut();
                $('#tabs_contents1 .tabing-content').eq(curInd).fadeIn();
        }
        else{
        $('#tabs_contents1 .tabing-content').slideUp();
                $('#tabs_contents1 .tabing-content').eq(curInd).slideToggle();
        }
        });
                $('#tabs_contents1 h2').click(function(e){
        e.preventDefault();
                $('#tabs_contents1 h2').removeClass('active');
                $(this).addClass('active');
                //alert(curInd);
                if ($(window).width() > 767){
        $(this).next().siblings('.tabing-content').fadeOut();
                $(this).next().fadeIn();
        }
        else{
        $(this).next().siblings('.tabing-content').slideUp();
                $(this).next().slideToggle();
        }

        });
                $('#tabs-list2 li').click(function(e){
        e.preventDefault();
                var curInd = $(this).index();
                $(this).siblings().removeClass('active');
                $(this).addClass('active');
                if ($(window).width() > 767){
        $('#tabs_contents2 .tabing-content').fadeOut();
                $('#tabs_contents2 .tabing-content').eq(curInd).fadeIn();
        }
        else{
        $('#tabs_contents2 .tabing-content').slideUp();
                $('#tabs_contents2 .tabing-content').eq(curInd).slideToggle();
        }
        });
                $('#tabs_contents2 h2').click(function(e){
        e.preventDefault();
                $('#tabs_contents2 h2').removeClass('active');
                $(this).addClass('active');
                if ($(window).width() > 767){
        $(this).next().siblings('.tabing-content').fadeOut();
                $(this).next().fadeIn();
        }
        else{
        $(this).next().siblings('.tabing-content').slideUp();
                $(this).next().slideToggle();
        }
        });
                $('#tabs-list3 li').click(function(e){
        e.preventDefault();
                var curInd = $(this).index();
                $(this).siblings().removeClass('active');
                $(this).addClass('active');
                //alert(curInd);
                if ($(window).width() > 767){
        $('#tabs_contents3 .tabing-content').fadeOut();
                $('#tabs_contents3 .tabing-content').eq(curInd).fadeIn();
        }
        else{
        $('#tabs_contents3 .tabing-content').slideUp();
                $('#tabs_contents3 .tabing-content').eq(curInd).slideToggle();
        }
        });
                $('#tabs_contents3 h2').click(function(e){
        e.preventDefault();
                $('#tabs_contents3 h2').removeClass('active');
                $(this).addClass('active');
                //alert(curInd);
                if ($(window).width() > 767){
        $(this).next().siblings('.tabing-content').fadeOut();
                $(this).next().fadeIn();
        }
        else{
        $(this).next().siblings('.tabing-content').slideUp();
                $(this).next().slideToggle();
        }

        });
        });
                $(window).resize(function(){
        activeTab();
        })
                function activeTab(){
                if ($(window).width() > 767){
                var active_ind = $('#tabs-list1 li.active').index();
                        $('#tabs_contents1 .tabing-content').eq(active_ind).fadeIn();
                        var active_ind1 = $('#tabs-list2 li.active').index();
                        $('#tabs_contents2 .tabing-content').eq(active_ind1).fadeIn();
                        var active_ind1 = $('#tabs-list3 li.active').index();
                        $('#tabs_contents3 .tabing-content').eq(active_ind1).fadeIn();
                }
                else{
                $('#tabs_contents1 .tabing-content').fadeOut();
                        $('#tabs_contents2 .tabing-content').fadeOut();
                        $('#tabs_contents3 .tabing-content').fadeOut();
                }
                }
    </script>
</div>